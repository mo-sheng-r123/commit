"use strict";(self["webpackChunkcommity"]=self["webpackChunkcommity"]||[]).push([[679],{1679:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"box-card"},[t("span",[e._v("管理员管理")])]),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"关键字"}},[t("el-input",{attrs:{clearable:"",placeholder:"关键字"},on:{clear:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.seratch}},[e._v("查询")])],1)],1)],1)],1),t("el-row",{staticClass:"butt"},[e.$power.haveown(e.power,"添加管理员")?t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]):e._e()],1),t("Table",{attrs:{loading:e.loading,tableData:e.tableData,tableCouml:e.tableCouml},scopedSlots:e._u([{key:"option",fn:function(a){return[e.$power.haveown(e.power,"修改管理员")?t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.mod(a.data)}}},[e._v("修改")]):e._e(),e.$power.haveown(e.power,"删除管理员")?t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.data.id)}}},[e._v("删除")]):e._e()]}}])}),t("Paging",{attrs:{form:e.form,total:e.total},on:{paging:e.paging}}),t("add-administrator",{attrs:{modcom:e.modcom,dialogVisible:e.dialogVisible},on:{reseteditform:e.reseteditform,chansgedialogVisible:e.chansgedialogVisible}})],1)},r=[],l=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"center",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.query,"label-width":"98px"}},[t("div",{staticClass:"tian"},[t("el-form-item",{attrs:{label:"账号：",prop:"username"}},[t("el-input",{model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}})],1),t("el-form-item",{attrs:{label:"密码：",prop:"pass"}},[t("el-input",{attrs:{type:"password"},model:{value:e.query.pass,callback:function(t){e.$set(e.query,"pass",t)},expression:"query.pass"}})],1),t("el-form-item",{attrs:{label:"确认密码：",prop:"passpwd"}},[t("el-input",{attrs:{type:"password"},model:{value:e.query.passpwd,callback:function(t){e.$set(e.query,"passpwd",t)},expression:"query.passpwd"}})],1),t("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[t("el-input",{model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),t("el-form-item",{attrs:{label:"联系方式：",prop:"tel"}},[t("el-input",{model:{value:e.query.tel,callback:function(t){e.$set(e.query,"tel",t)},expression:"query.tel"}})],1),t("el-form-item",{attrs:{label:"角色",prop:"typeid"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.query.typeid,callback:function(t){e.$set(e.query,"typeid",t)},expression:"query.typeid"}},e._l(e.list,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.satlop}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("ruleForm")}}},[e._v("确 定")])],1)],1)},s=[],o={name:"addAdministrator",props:{dialogVisible:{type:Boolean,default:!1},modcom:{type:Object,default:()=>{}}},data(){var e=(e,t,a)=>{let i=/^[^\d][\u2E80-\u9FFFA-z-_.\d]{1,17}$/;if(!i.test(t))return a(new Error("账号是由汉字、字母2-18位组成的"));a()},t=(e,t,a)=>{let i=/^1[356789]\d{1,9}$/;if(!i.test(t))return a(new Error("手机号由数字12个字组成的"));a()};return{title:"添加管理员",list:[],query:{},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:e,trigger:"blur"}],name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}],typeid:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},created(){this.getadmin()},updated(){this.title=this.modcom.id?"编辑管理员":"添加管理员",this.query=this.modcom?this.modcom:{}},methods:{satlop(){this.$emit("chansgedialogVisible",!1)},submit(e){this.$refs[e].validate((async e=>{if(!e)return!1;{delete this.query.passpwd;let e=await this.http.post("/administrator/add",this.query);1e4==e.errCode?(this.$message.success("添加成功"),this.$emit("chansgedialogVisible",!1)):this.$message.error(e.errMsg),this.$emit("reseteditform")}}))},async getadmin(){let e=await this.http.get("/administratorrole/list",{page:1,psize:270});"10000"==e.errCode&&(this.list=e.data.list)},handleClose(e){this.$confirm("确认关闭？").then((()=>{this.$emit("reseteditform"),this.$emit("chansgedialogVisible",!1)})).catch((()=>{}))}}},n=o,d=a(1001),u=(0,d.Z)(n,l,s,!1,null,"69dd2e45",null),p=u.exports,m=a(466),c=a(2767),h={data(){return{loading:!0,form:{page:1,psize:5},tableData:[],tableCouml:[{prop:"id",label:"ID",width:"180"},{prop:"username",label:"登录账号",width:"180"},{prop:"name",label:"姓名",width:"230"},{prop:"tel",label:"手机号",width:"230"},{prop:"typeName",label:"类型",width:"230"},{label:"操作",isshow:!0,showname:"option"}],total:0,dialogVisible:!1,modcom:{},power:[]}},components:{addAdministrator:p,Table:m.Z,Paging:c.Z},created(){this.power=this.$power.getownpriv("管理员管理"),this.getimet()},methods:{paging(){this.getimet()},reseteditform(){this.modcom={}},mod(e){this.modcom=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0,this.modcom.pass=""},handleDelete(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let t=await this.http.get("/administrator/delete",{id:e});"10000"==t.errCode&&(this.$message.success("删除成功"),this.getimet())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},chansgedialogVisible(e){this.dialogVisible=e,this.getimet()},seratch(){this.getimet()},async getimet(){let e=await this.http.get("/administrator/list",this.form);"10000"==e.errCode&&(this.tableData=e.data.list,this.total=e.data.counts,this.loading=!1)},handleClose(e){this.$confirm("确认关闭？").then((()=>{e()})).catch((()=>{}))}}},g=h,b=(0,d.Z)(g,i,r,!1,null,"d46a1a38",null),f=b.exports},2767:function(e,t,a){a.d(t,{Z:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":this.query.page,"page-sizes":[5,10,15,20],"page-size":this.query.psize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],l={name:"Paging",props:{query:{type:Object,require:()=>{}},total:{type:Number,require:()=>{}}},data(){return{}},methods:{handleSizeChange(e){this.query.psize=e,this.loading=!1,this.$emit("paging")},handleCurrentChange(e){this.query.page=e,this.$emit("paging"),this.loading=!1}}},s=l,o=a(1001),n=(0,o.Z)(s,i,r,!1,null,"37f50908",null),d=n.exports},466:function(e,t,a){a.d(t,{Z:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-background":"rgba(0, 0, 0, 0)"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableCouml,(function(a,i){return[a.isshow?t("el-table-column",{key:i,attrs:{label:a.label},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t(a.showname,null,{data:t.row})]}}],null,!0)}):t("el-table-column",{key:i,attrs:{prop:a.prop,label:a.label,width:a.width}})]}))],2)},r=[],l={name:"tablecom",props:{loading:{type:Boolean,default:()=>!0},tableData:{type:Array,default:()=>[]},tableCouml:{type:Array,default:()=>[]}},data(){return{}},created(){},methods:{handleSelectionChange(e){e.forEach((e=>{this.$emit("idshow",e.id)}))}}},s=l,o=a(1001),n=(0,o.Z)(s,i,r,!1,null,"8f316a3a",null),d=n.exports}}]);
//# sourceMappingURL=679.00583d77.js.map