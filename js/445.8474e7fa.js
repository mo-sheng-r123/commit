"use strict";(self["webpackChunkcommity"]=self["webpackChunkcommity"]||[]).push([[445],{5445:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"box-card"},[t("span",[e._v("房间管理")])]),t("el-row",[t("div",{staticClass:"ol"},[t("el-card",{staticClass:"box-card"},[t("el-collapse",{attrs:{accordion:""}},[t("el-collapse-item",[t("template",{slot:"title"},[t("p",[t("i",{staticClass:"el-icon-search"}),e._v("筛选查询")])]),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form",{ref:"query",attrs:{model:e.query,"label-width":"110px"}},[t("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"楼栋ID："}},[t("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.buildingid,callback:function(t){e.$set(e.query,"buildingid","string"===typeof t?t.trim():t)},expression:"query.buildingid"}},e._l(e.list,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"房间号："}},[t("el-input",{attrs:{clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.houseno,callback:function(t){e.$set(e.query,"houseno",t)},expression:"query.houseno"}})],1),t("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"房间类型："}},[t("el-input",{model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}})],1),t("el-form-item",{staticStyle:{"margin-left":"40px","padding-right":"0px"},attrs:{label:"房间面积范围：",clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.areas,callback:function(t){e.$set(e.query,"areas",t)},expression:"query.areas"}},[t("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"最大"},model:{value:e.query.max,callback:function(t){e.$set(e.query,"max",t)},expression:"query.max"}}),e._v("—— "),t("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"最小"},model:{value:e.query.min,callback:function(t){e.$set(e.query,"min",t)},expression:"query.min"}})],1),t("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"房间朝向："}},[t("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.orientation,callback:function(t){e.$set(e.query,"orientation",t)},expression:"query.orientation"}},[t("el-option",{attrs:{label:"朝东",value:"朝东"}}),t("el-option",{attrs:{label:"朝西",value:"朝西"}}),t("el-option",{attrs:{label:"朝南",value:"朝南"}}),t("el-option",{attrs:{label:"朝北",value:"朝北"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.seratch}},[e._v("查询")])],1)],1)],1)],1)],2)],1),t("div",{staticClass:"ul"},[t("p",[t("i",{staticClass:"el-icon-s-grid"}),e._v("数据列表")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]),t("el-button",{attrs:{type:"danger"},on:{click:e.del}},[e._v("批量删除")])],1)],1)],1)]),t("Table",{attrs:{loading:e.loading,tableData:e.tableData,tableCouml:e.tableCouml},on:{idshow:e.idshow},scopedSlots:e._u([{key:"option",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.mod(l.data)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(l.data)}}},[e._v("删除")])]}}])}),t("Paging",{attrs:{query:e.query,total:e.total},on:{paging:e.paging}}),t("HouseAdd",{attrs:{dialogVisible:e.dialogVisible,modcom:e.modcom},on:{chansgedialogVisible:e.chansgedialogVisible,chan:e.chan}})],1)},i=[],s=(l(7658),l(466)),o=l(2767),n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"40%",center:"center","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"op"},[t("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"楼栋",prop:"buildingid"}},[t("div",{staticClass:"ol"},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.buildingid,callback:function(t){e.$set(e.form,"buildingid",t)},expression:"form.buildingid"}},e._l(e.list,(function(e,l){return t("el-option",{key:l,attrs:{label:e.name,value:e.id}})})),1)],1)]),t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"房间号",prop:"houseno"}},[t("el-input",{model:{value:e.form.houseno,callback:function(t){e.$set(e.form,"houseno",t)},expression:"form.houseno"}})],1),t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"房间面积(平米)",prop:"areas"}},[t("el-input",{model:{value:e.form.areas,callback:function(t){e.$set(e.form,"areas",t)},expression:"form.areas"}})],1),t("el-form-item",{attrs:{label:"房间类型"}},[t("div",{staticClass:"ol"},[t("el-select",{staticStyle:{width:"35%"},attrs:{placeholder:"请选择"},model:{value:e.sh,callback:function(t){e.sh=t},expression:"sh"}},[t("el-option",{attrs:{label:"1室",value:"1室"}}),t("el-option",{attrs:{label:"2室",value:"2室"}}),t("el-option",{attrs:{label:"3室",value:"3室"}}),t("el-option",{attrs:{label:"4室",value:"4室"}}),t("el-option",{attrs:{label:"5室",value:"5室"}}),t("el-option",{attrs:{label:"6室",value:"6室"}}),t("el-option",{attrs:{label:"7室",value:"7室"}}),t("el-option",{attrs:{label:"8室",value:"8室"}}),t("el-option",{attrs:{label:"9室",value:"9室"}}),t("el-option",{attrs:{label:"10室",value:"10室"}})],1),t("el-select",{staticStyle:{width:"35%"},attrs:{placeholder:"请选择"},model:{value:e.tin,callback:function(t){e.tin=t},expression:"tin"}},[t("el-option",{attrs:{label:"1厅",value:"1厅"}}),t("el-option",{attrs:{label:"2厅",value:"2厅"}}),t("el-option",{attrs:{label:"3厅",value:"3厅"}}),t("el-option",{attrs:{label:"4厅",value:"4厅"}}),t("el-option",{attrs:{label:"5厅",value:"5厅"}}),t("el-option",{attrs:{label:"6厅",value:"6厅"}}),t("el-option",{attrs:{label:"7厅",value:"7厅"}}),t("el-option",{attrs:{label:"8厅",value:"8厅"}}),t("el-option",{attrs:{label:"9厅",value:"9厅"}}),t("el-option",{attrs:{label:"10厅",value:"10厅"}})],1)],1)]),t("el-form-item",{attrs:{label:"朝向",prop:"orientation"}},[t("div",{staticClass:"ol"},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.orientation,callback:function(t){e.$set(e.form,"orientation",t)},expression:"form.orientation"}},[t("el-option",{attrs:{label:"朝东",value:"朝东"}}),t("el-option",{attrs:{label:"朝西",value:"朝西"}}),t("el-option",{attrs:{label:"朝南",value:"朝南"}}),t("el-option",{attrs:{label:"朝北",value:"朝北"}})],1)],1)])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.serct}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("ruleForm")}}},[e._v("确 定")])],1)])},r=[],u={name:"Houseadd",props:{dialogVisible:{type:Boolean,default:!1},modcom:{type:Object,default:()=>{}}},data(){return{title:"添加房间",form:{},sh:"",tin:"",list:[],rules:{buildingid:[{required:!0,message:"请选择楼栋",trigger:"change"}],houseno:[{required:!0,message:"请输入房间号",trigger:"blur"}],areas:[{required:!0,message:"请输入房间面积",trigger:"blur"}],orientation:[{required:!0,message:"请选择朝向",trigger:"change"}]}}},created(){this.list=this.$store.state.building.buildingdata},updated(){this.title=this.modcom.id?"修改楼栋":"添加楼栋",this.form=this.modcom?this.modcom:{}},methods:{serct(){this.$emit("chansgedialogVisible",!1)},submit(e){this.form.type=this.sh+=this.tin,this.$refs[e].validate((async e=>{if(!e)return!1;{let e=await this.http.post("/houses/add",this.form);1e4==e.errCode&&(console.log(this.form.building),this.$message.success("添加成功"),this.$emit("chansgedialogVisible",!1),this.sh="",this.tin="",this.$emit("chan"))}}))},handleClose(e){this.$confirm("确认关闭？").then((()=>{this.$emit("chansgedialogVisible",!1),this.sh="",this.tin="",this.$emit("chan")})).catch((()=>{}))}}},c=u,d=l(1001),h=(0,d.Z)(c,n,r,!1,null,"53bab760",null),p=h.exports,m={data(){return{loading:!0,form:{},tableData:[],tableCouml:[{prop:"id",label:"房间ID",width:"180"},{prop:"building",label:"楼号",width:"200"},{prop:"houseno",label:"房间号",width:"180"},{prop:"areas",label:"面积(平米)",width:"180"},{prop:"type",label:"房间类型",width:"180"},{prop:"orientation",label:"朝向",width:"180"},{label:"操作",isshow:!0,showname:"option"}],total:0,query:{page:1,psize:5},dialogVisible:!1,ids:[],modcom:{},list:[]}},components:{Table:s.Z,Paging:o.Z,HouseAdd:p},created(){this.getimet(),this.list=this.$store.state.building.buildingdata},methods:{paging(){this.getimet()},chan(){this.modcom={}},mod(e){this.modcom=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},idshow(e){this.ids.push(e)},del(){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let e=await this.http.post("/houses/deleteall",{ids:this.ids});1e4==e.errCode&&(this.$message.success("删除成功"),this.getimet())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleDelete(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let t=await this.http.get("/houses/delete",{id:e.id});"10000"==t.errCode&&(this.$message.success("删除成功"),this.getimet())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},seratch(){this.getimet()},async getimet(){let e=await this.http.get("/houses/list",this.query);"10000"==e.errCode&&(this.tableData=e.data.list,this.total=e.data.counts,this.loading=!1)},handleClose(e){this.$confirm("确认关闭？").then((()=>{e()})).catch((()=>{}))},chansgedialogVisible(e){this.dialogVisible=e,this.getimet()}}},b=m,g=(0,d.Z)(b,a,i,!1,null,"085d7980",null),y=g.exports},2767:function(e,t,l){l.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":this.query.page,"page-sizes":[5,10,15,20],"page-size":this.query.psize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],s={name:"Paging",props:{query:{type:Object,require:()=>{}},total:{type:Number,require:()=>{}}},data(){return{}},methods:{handleSizeChange(e){this.query.psize=e,this.loading=!1,this.$emit("paging")},handleCurrentChange(e){this.query.page=e,this.$emit("paging"),this.loading=!1}}},o=s,n=l(1001),r=(0,n.Z)(o,a,i,!1,null,"37f50908",null),u=r.exports},466:function(e,t,l){l.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-background":"rgba(0, 0, 0, 0)"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableCouml,(function(l,a){return[l.isshow?t("el-table-column",{key:a,attrs:{label:l.label},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t(l.showname,null,{data:t.row})]}}],null,!0)}):t("el-table-column",{key:a,attrs:{prop:l.prop,label:l.label,width:l.width}})]}))],2)},i=[],s={name:"tablecom",props:{loading:{type:Boolean,default:()=>!0},tableData:{type:Array,default:()=>[]},tableCouml:{type:Array,default:()=>[]}},data(){return{}},created(){},methods:{handleSelectionChange(e){e.forEach((e=>{this.$emit("idshow",e.id)}))}}},o=s,n=l(1001),r=(0,n.Z)(o,a,i,!1,null,"8f316a3a",null),u=r.exports}}]);
//# sourceMappingURL=445.8474e7fa.js.map