"use strict";(self["webpackChunkcommity"]=self["webpackChunkcommity"]||[]).push([[53],{466:function(e,t,a){a.d(t,{Z:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-background":"rgba(0, 0, 0, 0)"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableCouml,(function(a,l){return[a.isshow?t("el-table-column",{key:l,attrs:{label:a.label},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t(a.showname,null,{data:t.row})]}}],null,!0)}):t("el-table-column",{key:l,attrs:{prop:a.prop,label:a.label,width:a.width}})]}))],2)},i=[],s={name:"tablecom",props:{loading:{type:Boolean,default:()=>!0},tableData:{type:Array,default:()=>[]},tableCouml:{type:Array,default:()=>[]}},data(){return{}},created(){},methods:{handleSelectionChange(e){e.forEach((e=>{this.$emit("idshow",e.id)}))}}},o=s,r=a(1001),n=(0,r.Z)(o,l,i,!1,null,"8f316a3a",null),c=n.exports},1053:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"box-card"},[t("span",[e._v("居民管理")])]),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form",{ref:"form",attrs:{model:e.query,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"楼栋ID："}},[t("el-cascader",{attrs:{placeholder:"请选择",options:this.$store.state.building.buildingdata,props:{label:"name",value:"id",checkStrictly:!0},filterable:""},model:{value:e.query.buildingid,callback:function(t){e.$set(e.query,"buildingid",t)},expression:"query.buildingid"}})],1),t("el-form-item",{attrs:{label:"姓名："}},[t("el-input",{attrs:{placeholder:"居民姓名"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),t("el-form-item",{attrs:{label:"电话"}},[t("el-input",{attrs:{placeholder:"居民电话"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),t("el-form-item",{attrs:{label:"房间号"}},[t("el-input",{attrs:{placeholder:"房间号"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),t("el-form-item",{attrs:{label:"用户类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.query.region,callback:function(t){e.$set(e.query,"region",t)},expression:"query.region"}},[t("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"}},[e._v("查询")])],1)],1)],1)],1),t("el-row",{staticClass:"butt"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]),t("el-button",{attrs:{type:"danger"},on:{click:e.del}},[e._v("批量删除")]),t("el-button",{attrs:{type:"success"}},[e._v("批量审核")])],1),t("Table",{attrs:{loading:e.loading,tableData:e.tableData,tableCouml:e.tableCouml},on:{idshow:e.idshow},scopedSlots:e._u([{key:"imgage",fn:function(a){return[t("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.img+a.data.photo,fit:"fill"}})]}},{key:"sex",fn:function(a){return[t("p",[e._v(e._s(1==a.data.sex?"男":"女"))])]}},{key:"state",fn:function(a){return[t("p",[e._v(e._s(2==a.data.state?"已审核":"未审核"))])]}},{key:"option",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.mod(a.data)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.data)}}},[e._v("删除")])]}}])}),t("Userrinfotian",{attrs:{dialogVisible:e.dialogVisible,modcom:e.modcom},on:{change:e.change}})],1)},i=[],s=(a(7658),a(466)),o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"65%",center:"center","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("div",[t("el-form-item",{staticClass:"ol",attrs:{label:"头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:"http://estate.eshareedu.cn/estate/api/upload/add","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:"修改居民"==this.title?e.imageUrl+this.form.photo:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"楼栋"}},[t("el-cascader",{attrs:{placeholder:"请选择",options:this.$store.state.building.buildingdata,props:{label:"name",value:"id",checkStrictly:!0},clearable:""},model:{value:e.form.l,callback:function(t){e.$set(e.form,"l",t)},expression:"form.l"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"房间号"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.houseid,callback:function(t){e.$set(e.form,"houseid",t)},expression:"form.houseid"}},e._l(e.list,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"姓名"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),t("el-radio",{attrs:{label:"0"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")])],1)],1),t("div",{staticClass:"op"},[t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"民族"}},[t("el-input",{model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}})],1),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"籍贯"}},[t("el-input",{model:{value:e.form.usernative,callback:function(t){e.$set(e.form,"usernative",t)},expression:"form.usernative"}})],1),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"身份证号"}},[t("el-input",{model:{value:e.form.cardid,callback:function(t){e.$set(e.form,"cardid",t)},expression:"form.cardid"}})],1),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"联系电话"}},[t("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"住户类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.usertype,callback:function(t){e.$set(e.form,"usertype",t)},expression:"form.usertype"}},e._l(e.type,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.serate}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},r=[],n={props:{dialogVisible:{type:Boolean,default:()=>!1},modcom:{type:Object,default:()=>{}}},data(){return{headers:{Authorization:sessionStorage.getItem("token")},form:{},imageUrl:"",query:{page:1,psize:5e3},list:[],type:[],title:"添加居民"}},created(){this.getid(),this.getusertype()},updated(){return this.title=this.modcom.id?"修改居民":"添加居民",this.form=this.modcom?this.modcom:{},"修改居民"==this.title?this.imageUrl="http://estate.eshareedu.cn/estate/upload/":this.imageUrl=""},methods:{async getusertype(){let e=await this.http.get("/userinfotype/list",this.query);1e4==e.errCode&&(this.type=e.data.list)},async getid(){let e=await this.http.get("/houses/list",this.query);1e4==e.errCode&&(this.list=e.data.list)},async submit(){let e=await this.http.post("/userinfo/add",this.form);1e4==e.errCode&&(this.$message.success("登录成功"),this.$emit("change",!1),this.form={})},serate(){this.$emit("change",!1)},handleClose(e){this.$confirm("确认关闭？").then((()=>{this.$emit("change",!1)})).catch((()=>{}))},handleAvatarSuccess(e,t){this.form.photo=e.data,this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},c=n,d=a(1001),m=(0,d.Z)(c,o,r,!1,null,"b407bf54",null),u=m.exports,h={data(){return{img:"http://estate.eshareedu.cn/estate/upload/",loading:!0,query:{page:1,psize:5},tableData:[],tableCouml:[{prop:"id",label:"ID",width:"60"},{prop:"photo",label:"头像",width:"78",isshow:!0,showname:"imgage"},{prop:"name",label:"姓名",width:"78"},{prop:"usertypeName",label:"业主类型",width:"78"},{prop:"sex",label:"性别",width:"65",isshow:!0,showname:"sex"},{prop:"cardid",label:"身份证号",width:"100"},{prop:"mobile",label:"手机号",width:"85"},{prop:"usernative",label:"籍贯",width:"85"},{prop:"nation",label:"民族",width:"65"},{prop:"building",label:"小区",width:"100"},{prop:"houseno",label:"房间号",width:"78"},{prop:"state",label:"审核状态",width:"92",isshow:!0,showname:"state"},{label:"操作",isshow:!0,showname:"option"}],total:0,ids:[],dialogVisible:!1,modcom:{}}},components:{Table:s.Z,Userrinfotian:u},created(){this.getimet()},methods:{mod(e){this.modcom=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},change(e){this.dialogVisible=e,this.getimet()},handleDelete(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let t=await this.http.get("/userinfo/delete",{id:e.id});"10000"==t.errCode&&(this.$message.success("删除成功"),this.getimet())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},idshow(e){this.ids.push(e)},del(){0!=this.ids.length?this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let e=await this.http.post("/userinfo/deleteall",{ids:this.ids});"10000"==e.errCode&&(this.$message.success("删除成功"),this.getimet())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})})):this.$message.error("请选择要删除的记录")},async getimet(){let e=await this.http.get("/userinfo/list",this.query);"10000"==e.errCode&&(this.tableData=e.data.list,this.total=e.data.counts,this.loading=!1)}}},p=h,f=(0,d.Z)(p,l,i,!1,null,"45e633c6",null),b=f.exports}}]);
//# sourceMappingURL=53.523617d4.js.map