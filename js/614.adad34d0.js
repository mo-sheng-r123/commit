"use strict";(self["webpackChunkcommity"]=self["webpackChunkcommity"]||[]).push([[614],{2767:function(e,t,i){i.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":this.query.page,"page-sizes":[5,10,15,20],"page-size":this.query.psize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],s={name:"Paging",props:{query:{type:Object,require:()=>{}},total:{type:Number,require:()=>{}}},data(){return{}},methods:{handleSizeChange(e){this.query.psize=e,this.loading=!1,this.$emit("paging")},handleCurrentChange(e){this.query.page=e,this.$emit("paging"),this.loading=!1}}},o=s,n=i(1001),r=(0,n.Z)(o,a,l,!1,null,"37f50908",null),d=r.exports},466:function(e,t,i){i.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-background":"rgba(0, 0, 0, 0)"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableCouml,(function(i,a){return[i.isshow?t("el-table-column",{key:a,attrs:{label:i.label},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t(i.showname,null,{data:t.row})]}}],null,!0)}):t("el-table-column",{key:a,attrs:{prop:i.prop,label:i.label,width:i.width}})]}))],2)},l=[],s={name:"tablecom",props:{loading:{type:Boolean,default:()=>!0},tableData:{type:Array,default:()=>[]},tableCouml:{type:Array,default:()=>[]}},data(){return{}},created(){},methods:{handleSelectionChange(e){e.forEach((e=>{this.$emit("idshow",e.id)}))}}},o=s,n=i(1001),r=(0,n.Z)(o,a,l,!1,null,"8f316a3a",null),d=r.exports},6664:function(e,t,i){i.r(t),i.d(t,{default:function(){return $}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"box-card"},[t("span",[e._v("缴费管理")])]),t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"已缴费",name:"first"}}),t("el-tab-pane",{attrs:{label:"未缴费",name:"second"}})],1),t("el-row",[t("el-form",{ref:"form",attrs:{model:e.query,"label-width":"85px"}},[t("div",{staticClass:"op"},[t("el-form-item",{attrs:{label:"姓名："}},[t("el-input",{attrs:{clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),t("el-form-item",{attrs:{label:"园区名称："}},[t("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.buildingid,callback:function(t){e.$set(e.query,"buildingid","string"===typeof t?t.trim():t)},expression:"query.buildingid"}},e._l(this.$store.state.building.buildingdata,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"房号："}},[t("el-input",{model:{value:e.query.na,callback:function(t){e.$set(e.query,"na",t)},expression:"query.na"}})],1),t("el-form-item",{attrs:{label:"联系方式："}},[t("el-input",{attrs:{clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.mibile,callback:function(t){e.$set(e.query,"mibile",t)},expression:"query.mibile"}})],1),t("el-form-item",{attrs:{label:"账期："}},[t("el-input",{model:{value:e.query.na,callback:function(t){e.$set(e.query,"na",t)},expression:"query.na"}})],1),t("el-form-item",{attrs:{label:"添加入："}},[t("el-input",{attrs:{clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.admin,callback:function(t){e.$set(e.query,"admin",t)},expression:"query.admin"}})],1)],1),t("div",{staticClass:"ol"},[t("el-form-item",{attrs:{label:"流水单号："}},[t("el-input",{attrs:{clearable:""},on:{change:e.seratch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seratch.apply(null,arguments)}},model:{value:e.query.orderno,callback:function(t){e.$set(e.query,"orderno",t)},expression:"query.orderno"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.seratch}},[e._v("查询")]),t("el-button",{attrs:{type:"primary"}},[e._v("重置")])],1)],1)])],1),t("el-row",{staticClass:"pl"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]),t("el-button",{attrs:{type:"danger"},on:{click:e.del}},[e._v("批量删除")])],1),t("Table",{attrs:{loading:e.loading,tableData:e.tableData,tableCouml:e.tableCouml},on:{idshow:e.idshow},scopedSlots:e._u([{key:"option",fn:function(i){return[t("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("详情")]),t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.mod(i.data)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(i.data)}}},[e._v("删除")])]}}])}),t("Paging",{attrs:{query:e.query,total:e.total},on:{paging:e.paging}}),t("Feeadd",{attrs:{dialogVisible:e.dialogVisible,modcom:e.modcom},on:{chansgedialogVisible:e.chansgedialogVisible}})],1)},l=[],s=(i(7658),i(466)),o=i(2767),n=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"40%",center:"center","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"95px"}},[t("el-form-item",{attrs:{label:"费用类型："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.jiao,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{width:"57%"},attrs:{label:"金额："}},[t("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),t("el-form-item",{attrs:{label:"到期："}},[t("div",{staticClass:"ol"},[t("el-date-picker",{staticStyle:{width:"30%"},attrs:{type:"date",placeholder:"开始时间"},model:{value:e.form.begindate,callback:function(t){e.$set(e.form,"begindate",t)},expression:"form.begindate"}}),t("el-date-picker",{staticStyle:{width:"30%"},attrs:{type:"date",placeholder:"结束时间"},model:{value:e.form.enddate,callback:function(t){e.$set(e.form,"enddate",t)},expression:"form.enddate"}})],1)]),t("el-form-item",{attrs:{label:"小区："}},[t("el-cascader",{attrs:{placeholder:"请选择",options:this.$store.state.building.buildingdata,props:{label:"name",value:"id",checkStrictly:!0},filterable:""},model:{value:e.form.buildingid,callback:function(t){e.$set(e.form,"buildingid",t)},expression:"form.buildingid"}})],1),t("el-form-item",{attrs:{label:"缴费房间"}},[t("el-radio-group",[t("el-radio",{attrs:{label:"全部"}}),t("el-radio",{attrs:{label:"部分房间"},on:{change:e.fanwu}})],1)],1),t("el-form-item",{attrs:{label:""}},[t("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:"4",disabled:""},model:{value:e.form.houseids,callback:function(t){e.$set(e.form,"houseids",t)},expression:"form.houseids"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.serct}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),t("Feewu",{attrs:{isshow:e.isshow}})],1)},r=[],d=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"房屋列表",visible:e.isshow,width:"50%",center:"center","before-close":e.handleClose},on:{"update:visible":function(t){e.isshow=t}}},[t("el-form",{ref:"form",attrs:{model:e.query,"label-width":"105px"}},[t("el-form-item",{attrs:{label:"房间号："}},[t("el-input",{model:{value:e.query.houseno,callback:function(t){e.$set(e.query,"houseno",t)},expression:"query.houseno"}})],1),t("el-form-item",{attrs:{label:"小区名称："}},[t("el-input",{model:{value:e.query.buildingid,callback:function(t){e.$set(e.query,"buildingid",t)},expression:"query.buildingid"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.serach}},[e._v("查询")])],1)],1),t("Table",{attrs:{loading:e.loading,tableData:e.tableData,tableCouml:e.tableCouml},on:{idshow:e.idshow}}),t("Paging",{attrs:{query:e.query,total:e.total},on:{paging:e.paging}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.serct}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},u=[],c={props:["isshow"],data(){return{loading:!0,form:{},tableData:[],tableCouml:[{prop:"building",label:"楼号",width:"180"},{prop:"houseno",label:"房间号",width:"123"},{prop:"",label:"业主",width:"123"},{prop:"",label:"电话",width:"164"}],query:{page:1,psize:5},total:0,isde:[]}},components:{Table:s.Z,Paging:o.Z},created(){this.getimet(),this.$bus.$on("buildingid",(e=>{this.query.buildingid=Object.values(e).pop(),this.getimet()}))},methods:{submit(){this.$bus.$emit("isde",this.isde,!1)},idshow(e){this.isde.push(e)},serach(){this.getimet()},paging(){this.getimet()},async getimet(){let e=await this.http.get("/houses/list",this.query);1e4==e.errCode&&(this.tableData=e.data.list,this.loading=!1,this.total=e.data.counts)},serct(){this.$bus.$emit("issho",!1)},handleClose(e){this.$confirm("确认关闭？").then((()=>{this.$bus.$emit("issho",!1)})).catch((()=>{}))}}},h=c,m=i(1001),p=(0,m.Z)(h,d,u,!1,null,"3e775e5b",null),b=p.exports,f={props:{dialogVisible:{type:Boolean,default:!1},modcom:{type:Object,default:()=>{}}},data(){return{form:{},jiao:[],query:{page:1,psize:5},isshow:!1,ids:[],title:"新增缴费"}},components:{Feewu:b},created(){this.getjiao(),this.dia=this.dialogVisible,this.$bus.$on("issho",(e=>{this.isshow=e})),this.$bus.$on("isde",((e,t)=>{this.form.houseids=Object.values(e).pop(),this.isshow=t}))},updated(){this.title=this.modcom.id?"修改缴费":"新增缴费",this.form=this.modcom?this.modcom:{}},methods:{fanwu(){this.isshow=!0,this.$bus.$emit("buildingid",this.form.buildingid)},async submit(){this.form.buildingid=this.form.buildingid.join(",");let e=[];e.push(this.form.houseids),this.form.houseids=e;let t={type:this.form.type,begindate:this.form.begindate,enddate:this.form.enddate,price:this.form.price,buildingid:this.form.buildingid,houseids:e},i=await this.http.post("/fee/add",t);console.log(i),1e4==i.errCode&&(this.$message.success("添加成功"),this.$emit("chansgedialogVisible",!1),this.form={})},async getjiao(){let e=await this.http.get("/feetype/list",this.query);1e4==e.errCode&&(this.jiao=e.data.list)},serct(){this.$emit("chansgedialogVisible",!1)},handleClose(e){this.$confirm("确认关闭？").then((()=>{this.$emit("chansgedialogVisible",!1)})).catch((()=>{}))}}},g=f,y=(0,m.Z)(g,n,r,!1,null,"7ddf7c77",null),w=y.exports,k={data(){return{activeName:"first",loading:!0,form:{},tableData:[],tableCouml:[{prop:"id",label:"ID",width:"56"},{prop:"building",label:"姓名",width:"91"},{prop:"building",label:"楼栋号",width:"91"},{prop:"houseno",label:"房号",width:"78"},{prop:"mibile",label:"联系方式",width:"104"},{prop:"stateName",label:"缴费类型",width:"65"},{prop:"orientation",label:"账期",width:"78"},{prop:"price",label:"应缴金额(元)",width:"78"},{prop:"addtime",label:"导入时间",width:"130"},{prop:"admin",label:"添加者",width:"91"},{prop:"stateName",label:"状态",width:"91"},{label:"操作",isshow:!0,showname:"option"}],total:0,query:{page:1,psize:5},ids:[],dialogVisible:!1,modcom:{}}},components:{Table:s.Z,Paging:o.Z,Feeadd:w},created(){this.getimet()},methods:{mod(e){this.modcom=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},seratch(){this.getimet()},del(){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let e=await this.http.post("/fee/deleteall",{ids:this.ids});1e4==e.errCode&&(this.$message.success("删除成功"),this.getimet())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},idshow(e){this.ids.push(e)},handleDelete(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let t=await this.http.get("/fee/delete",{id:e.id});"10000"==t.errCode&&(this.$message.success("删除成功"),this.getimet())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},paging(){this.getimet()},async getimet(){let e=await this.http.get("/fee/list",this.query);"10000"==e.errCode&&(this.tableData=e.data.list,this.total=e.data.counts,this.loading=!1)},handleClose(e){this.$confirm("确认关闭？").then((()=>{e()})).catch((()=>{}))},chansgedialogVisible(e){this.dialogVisible=e,this.getimet()}}},v=k,q=(0,m.Z)(v,a,l,!1,null,"7378b7ad",null),$=q.exports}}]);
//# sourceMappingURL=614.adad34d0.js.map