{"version":3,"file":"js/669.c9ab5525.js","mappings":"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","sources":["webpack://commity/./src/components/Role.vue","webpack://commity/./src/components/Role/Roleadd.vue","webpack://commity/src/components/Role/Roleadd.vue","webpack://commity/./src/components/Role/Roleadd.vue?4c1b","webpack://commity/./src/components/Role/Roleadd.vue?64d4","webpack://commity/src/components/Role.vue","webpack://commity/./src/components/Role.vue?2343","webpack://commity/./src/components/Role.vue?fcdd","webpack://commity/./src/components/commts/Paging.vue","webpack://commity/src/components/commts/Paging.vue","webpack://commity/./src/components/commts/Paging.vue?0eb1","webpack://commity/./src/components/commts/Paging.vue?3e54","webpack://commity/./src/components/commts/Table.vue","webpack://commity/src/components/commts/Table.vue","webpack://commity/./src/components/commts/Table.vue?5e01","webpack://commity/./src/components/commts/Table.vue?248b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('span',[_vm._v(\"角色管理\")])]),_c('el-row',{staticClass:\"butt\"},[(_vm.$power.haveown(_vm.power,'添加角色'))?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"添加\")]):_vm._e()],1),_c('Table',{attrs:{\"loading\":_vm.loading,\"tableData\":_vm.tableData,\"tableCouml\":_vm.tableCouml},scopedSlots:_vm._u([{key:\"option\",fn:function(data){return [(_vm.$power.haveown(_vm.power,'修改角色'))?_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.dom(data.data)}}},[_vm._v(\"修改\")]):_vm._e(),(_vm.$power.haveown(_vm.power,'删除角色'))?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(data.data.id)}}},[_vm._v(\"删除\")]):_vm._e()]}}])}),_c('Paging',{attrs:{\"form\":_vm.form,\"total\":_vm.total},on:{\"paging\":_vm.paging}}),_c('Roleadd',{attrs:{\"dialogVisible\":_vm.dialogVisible,\"modcom\":_vm.modcom},on:{\"reseteditform\":_vm.reseteditform,\"chansgedialogVisible\":_vm.chansgedialogVisible}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":_vm.title,\"center\":\"center\",\"visible\":_vm.dialogVisible,\"width\":\"60%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"rules\":_vm.rules,\"model\":_vm.query,\"label-width\":\"98px\"}},[_c('div',{staticClass:\"tia\"},[_c('el-form-item',{staticStyle:{\"width\":\"130%\"},attrs:{\"label\":\"账号：\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.query.name),callback:function ($$v) {_vm.$set(_vm.query, \"name\", $$v)},expression:\"query.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色：\"}},_vm._l((_vm.list),function(imet,index){return _c('div',{key:index,attrs:{\"checked\":imet.checked}},[_c('el-checkbox',{attrs:{\"value\":!!imet.checked},on:{\"change\":function($event){return _vm.handleCheckAllChange($event,imet)}}},[_vm._v(_vm._s(imet.name))]),_c('el-checkbox-group',{on:{\"change\":function($event){return _vm.handleCheckedCitiesChange($event,imet)}},model:{value:(_vm.checkedCities),callback:function ($$v) {_vm.checkedCities=$$v},expression:\"checkedCities\"}},_vm._l((imet.children),function(it,index){return _c('el-checkbox',{key:index,attrs:{\"label\":it.id,\"value\":it.id}},[_vm._v(_vm._s(it.name))])}),1)],1)}),0)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.satlop}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit('ruleForm')}}},[_vm._v(\"确 定\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n            <el-dialog\r\n                  :title=\"title\"\r\n                  center=\"center\"\r\n                  :visible.sync=\"dialogVisible\"\r\n                  width=\"60%\"\r\n                  :before-close=\"handleClose\">\r\n                  <el-form :rules=\"rules\" ref=\"ruleForm\" :model=\"query\" label-width=\"98px\">\r\n                      <div class=\"tia\">\r\n                          <el-form-item label=\"账号：\" style=\"width:130%;\" prop=\"name\">\r\n                            <el-input v-model=\"query.name\"></el-input>\r\n                          </el-form-item>\r\n                          <el-form-item label=\"角色：\">\r\n                            <div v-for=\"(imet,index) in list\" :key=\"index\" :checked=\"imet.checked\">\r\n                                <el-checkbox  :value=\"!!imet.checked\" @change=\"handleCheckAllChange($event,imet)\" >{{imet.name}}</el-checkbox>\r\n                                <el-checkbox-group v-model=\"checkedCities\" @change=\"handleCheckedCitiesChange($event,imet)\">\r\n                                    <el-checkbox v-for=\"(it,index) in imet.children\" :label=\"it.id\" :key=\"index\" :value=\"it.id\">{{it.name}}</el-checkbox>\r\n                                </el-checkbox-group>\r\n                            </div>\r\n                          </el-form-item>\r\n                    </div>\r\n                  </el-form>\r\n                      <span slot=\"footer\" class=\"dialog-footer\">\r\n                        <el-button @click=\"satlop\">取 消</el-button>\r\n                        <el-button type=\"primary\" @click=\"submit('ruleForm')\">确 定</el-button>\r\n                      </span>\r\n                  \r\n              </el-dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"Roleadd\",\r\n    props:{\r\n        dialogVisible:{\r\n            type:Boolean,\r\n            default:false\r\n        },\r\n        modcom:{\r\n          type:Object,\r\n          default:()=>{}\r\n        }\r\n    },\r\n    \r\n    data(){\r\n       // 账号\r\n            var name = (rule, value, callback) => {\r\n            let reg = /^[^\\d][\\u2E80-\\u9FFFA-z-_.\\d]{1,17}$/\r\n            if(!reg.test(value)){\r\n            return callback(new Error('账号是由汉字、字母2-18位组成的'))\r\n            }\r\n            callback()\r\n        };\r\n\r\n        return{\r\n          title:'添加角色',\r\n            query:{},\r\n            rules: {\r\n              name: [\r\n                  { required: true, message: '请输入账号', trigger: 'blur' },\r\n                  { validator: name, trigger: 'blur' }\r\n                ],\r\n                // menus: [\r\n                //    { type: 'array', required: true, message: '请至少选择一个活动性质', trigger: 'change' }\r\n                // ]\r\n            },\r\n            list:[],\r\n            // checkAll: '',\r\n            checkedCities: [],\r\n        }\r\n    },\r\n    created(){\r\n        this.getitem()\r\n    },\r\n    updated(){\r\n      this.title = this.modcom.id?'编辑角色':'添加角色'\r\n      this.query = this.modcom?this.modcom:{}   //将值赋给query里面\r\n\r\n    },\r\n    methods:{\r\n        async getitem(){\r\n            let res = await this.http.get('/menu/list')\r\n            // console.log(res)\r\n            if(res.errCode == 10000){\r\n                this.list = res.data.list\r\n            }\r\n        },\r\n        add(li){\r\n          this.cities = li\r\n          this.checkedCities = li\r\n        },\r\n        // 复选框    全选\r\n        handleCheckAllChange(val,imet) {\r\n          \r\n            if(val){\r\n              imet.checked = 1\r\n              // 选中时\r\n              imet.children.forEach(imet=>{\r\n                this.checkedCities.push(imet.id)\r\n              })\r\n            }else{\r\n              imet.checked = 0\r\n              // 未选中时 \r\n              imet.children.forEach(it=>{\r\n                if(this.checkedCities.includes(it.id)){\r\n                  this.checkedCities = this.checkedCities.filter(val=>val!==it.id)\r\n                }\r\n              })\r\n              \r\n            }\r\n             console.log(imet);\r\n            \r\n          \r\n      },\r\n      //   单选\r\n      handleCheckedCitiesChange(value,row) {\r\n        // console.log(value,row)\r\n        let sons = row.children.map(it=>it.id)\r\n\r\n        let res = sons.map(imet=>this.checkedCities.includes(imet))\r\n        // console.log(res.filter(val=>val==true).length)\r\n        let data = res.filter(val =>val==true)\r\n        if(sons.length == data.length){\r\n            this.checkedCities.push(row.id)\r\n            // row.checked= sons.length === data.length\r\n            row.checked = 1\r\n        }else{\r\n            this.checkedCities = this.checkedCities.filter(op=>op!==row.id)\r\n            row.checked = 0\r\n        }\r\n\r\n          \r\n          // console.log(row.checked)\r\n          // console.log(this.checkedCities)\r\n      },\r\n\r\n    // 取消\r\n    satlop(){\r\n        this.$emit('chansgedialogVisible',false)\r\n    },\r\n    // 添加\r\n     submit(formName){\r\n          let meure = []\r\n          this.checkedCities.forEach(imet=>{\r\n            meure.push({id:imet})\r\n          })\r\n          this.query.menus = meure\r\n          \r\n          this.$refs[formName].validate(async (valid) => {\r\n          if (valid) {\r\n                   let res = await this.http.post('/administratorrole/add',this.query)\r\n                    // console.log(res)\r\n                    if(res.errCode == 10000){\r\n                      this.$message.success('添加成功')\r\n                      this.$emit('chansgedialogVisible',false)\r\n                    }\r\n                  this.$emit('reseteditform')\r\n          } else {\r\n            // console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n    },\r\n\r\n      // 添加\r\n      handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(() => {\r\n            // done();\r\n            // this.$emit('reseteditform')\r\n           this.$emit('chansgedialogVisible', false);\r\n          })\r\n          .catch(() => {});\r\n      },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n.tia{\r\n    .el-form-item{\r\n        margin-left: 60px;\r\n            .el-input{\r\n            margin-left: 80px;\r\n            width: 65%;\r\n            /deep/.el-input__inner{\r\n            border: 1px solid #ccc !important;\r\n        }\r\n            }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roleadd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roleadd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roleadd.vue?vue&type=template&id=16d8ed40&scoped=true&\"\nimport script from \"./Roleadd.vue?vue&type=script&lang=js&\"\nexport * from \"./Roleadd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roleadd.vue?vue&type=style&index=0&id=16d8ed40&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16d8ed40\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <span>角色管理</span>\r\n    </el-card>\r\n    <el-row class=\"butt\">\r\n      <el-button type=\"primary\" v-if=\"$power.haveown(power,'添加角色')\" @click=\"dialogVisible = true\" >添加</el-button>\r\n    </el-row>\r\n\r\n    <!-- 表格 -->\r\n      <Table :loading=\"loading\" :tableData=\"tableData\" :tableCouml=\"tableCouml\">\r\n          <template #option=\"data\">\r\n            <el-button type=\"success\" @click=\"dom(data.data)\" v-if=\"$power.haveown(power,'修改角色')\">修改</el-button>\r\n            <el-button type=\"danger\" @click=\"handleDelete(data.data.id)\" v-if=\"$power.haveown(power,'删除角色')\">删除</el-button>\r\n          </template>\r\n      </Table>\r\n\r\n    <!-- 分页 -->\r\n        <Paging :form=\"form\" :total=\"total\" @paging=\"paging\"></Paging>\r\n\r\n        <!-- 添加 -->\r\n              <Roleadd \r\n              @reseteditform=\"reseteditform\"\r\n              :dialogVisible=\"dialogVisible\" \r\n              :modcom=\"modcom\" \r\n              @chansgedialogVisible=\"chansgedialogVisible\"></Roleadd>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Roleadd from '@/components/Role/Roleadd.vue'\r\nimport Table from '@/components/commts/Table.vue'\r\nimport Paging from '@/components/commts/Paging.vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      form: {\r\n        page:1,\r\n        psize:5\r\n      },\r\n      query:{},\r\n      tableData: [],\r\n      tableCouml:[\r\n        {prop:\"id\",label:'ID',width:\"180\"},\r\n        {prop:\"name\",label:'姓名',width:\"230\"},\r\n        {label:'操作',isshow:true,showname:'option'},\r\n      ],\r\n      total:0,\r\n      dialogVisible: false,\r\n      modcom:{}, \r\n      power:[]\r\n    };\r\n  },\r\n  components:{\r\n    Roleadd,\r\n    Table,\r\n    Paging,\r\n  },\r\n  created(){\r\n    this.power = this.$power.getownpriv('角色管理管理')\r\n    // console.log(this.power)\r\n    this.getimet()\r\n  },\r\n  methods:{\r\n    reseteditform(){\r\n      this.modcom = {}\r\n    },\r\n    // 修改\r\n    dom(val){\r\n      this.modcom = JSON.parse(JSON.stringify(val))\r\n      this.dialogVisible = true\r\n    },\r\n    // 刷新\r\n    paging(){\r\n      this.getimet()\r\n    },\r\n    // 删除\r\n     handleDelete(val){\r\n       this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(async () => {\r\n            let res = await this.http.get('/administratorrole/delete',{id:val})\r\n            if(res.errCode == '10000'){\r\n                this.$message.success('删除成功')\r\n                this.getimet()\r\n            }\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });          \r\n        });\r\n    },\r\n    // 传递\r\n    chansgedialogVisible(val){\r\n      this.dialogVisible = val\r\n      this.getimet()\r\n    },\r\n    //查询\r\n    seratch(){\r\n      this.getimet()\r\n    },\r\n    \r\n      // 列表\r\n      async getimet(){\r\n        let res = await this.http.get('/administratorrole/list',this.form)\r\n        // console.log(res)\r\n        if(res.errCode == '10000'){\r\n          this.tableData = res.data.list\r\n          this.total = res.data.counts\r\n          this.loading = false\r\n        }\r\n      },\r\n      // 添加\r\n      handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(() => {\r\n            done();\r\n          })\r\n          .catch(() => {});\r\n      },\r\n        handleSizeChange(val) {\r\n            this.form.psize = val\r\n            this.getimet()\r\n            this.loading = false\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.form.page = val\r\n            this.getimet()\r\n            this.loading = false\r\n        }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../assets/css/admin.css\";\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=67ecfb3a&scoped=true&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=67ecfb3a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67ecfb3a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"current-page\":this.query.page,\"page-sizes\":[5, 10, 15, 20],\"page-size\":this.query.psize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n             <div class=\"block\">\r\n                <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"this.query.page\"\r\n                :page-sizes=\"[5, 10, 15, 20]\"\r\n                :page-size=\"this.query.psize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\">\r\n                </el-pagination>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"Paging\",\r\n    props:{\r\n        query:{\r\n            type:Object,\r\n            require:()=>{}\r\n        },\r\n        total:{\r\n            type:Number,\r\n            require:()=>{}\r\n        },\r\n    },\r\n    data(){\r\n        return{\r\n\r\n        }\r\n    },\r\n    methods:{\r\n         handleSizeChange(val) {\r\n            this.query.psize = val\r\n            this.loading = false\r\n            this.$emit('paging',);\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.query.page = val\r\n            this.$emit('paging',);\r\n            this.loading = false\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '@/assets/css/admin.css';\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Paging.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Paging.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Paging.vue?vue&type=template&id=37f50908&scoped=true&\"\nimport script from \"./Paging.vue?vue&type=script&lang=js&\"\nexport * from \"./Paging.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Paging.vue?vue&type=style&index=0&id=37f50908&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37f50908\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"element-loading-background\":\"rgba(0, 0, 0, 0)\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._l((_vm.tableCouml),function(imet,index){return [(!imet.isshow)?_c('el-table-column',{key:index,attrs:{\"prop\":imet.prop,\"label\":imet.label,\"width\":imet.width}}):_c('el-table-column',{key:index,attrs:{\"label\":imet.label},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._t(imet.showname,null,{\"data\":scope.row})]}}],null,true)})]})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n            <el-table :data=\"tableData\" style=\"width: 100%\" v-loading=\"loading\" element-loading-background=\"rgba(0, 0, 0, 0)\" @selection-change=\"handleSelectionChange\">\r\n                    <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\r\n                    <!-- <el-table-column :key=\"index\"><el-image :style=\"imet.style\" :src=\"imet.src\" fit=\"fill\"></el-image> </el-table-column> -->\r\n                <template v-for=\"(imet,index) in tableCouml\" >\r\n                    <el-table-column v-if=\"!imet.isshow\" :key=\"index\" :prop=\"imet.prop\" :label=\"imet.label\" :width=\"imet.width\">  </el-table-column>\r\n                    <el-table-column :label=\"imet.label\" :key=\"index\" v-else>\r\n                        <!-- 作用域插槽 -->\r\n                        <template slot-scope=\"scope\">\r\n                            <!-- 插槽处 slot -->\r\n                            <slot :name=\"imet.showname\" :data=\"scope.row\"></slot>\r\n                        </template>\r\n                    </el-table-column>\r\n                    </template>\r\n            </el-table>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n    name:\"tablecom\",\r\n    // 接值\r\n    props:{\r\n        loading:{\r\n            type:Boolean,\r\n            default:()=>true\r\n        },\r\n        tableData:{\r\n            type:Array,\r\n            default:()=>[]\r\n        },\r\n        tableCouml:{\r\n            type:Array,\r\n            default:()=>[]\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n            // tabledata:[]\r\n        }\r\n    },\r\n    created(){\r\n        // console.log(this.tabledata = this.tableData)\r\n    },\r\n    methods:{\r\n        handleSelectionChange(val){\r\n            // console.log(val)\r\n            val.forEach(imet => {\r\n                // this.ids.push(imet.id)\r\n                this.$emit('idshow',imet.id)\r\n            });\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import '../../assets/css/admin.css';\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Table.vue?vue&type=template&id=8f316a3a&scoped=true&\"\nimport script from \"./Table.vue?vue&type=script&lang=js&\"\nexport * from \"./Table.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Table.vue?vue&type=style&index=0&id=8f316a3a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8f316a3a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","$power","haveown","power","attrs","on","$event","dialogVisible","_e","loading","tableData","tableCouml","scopedSlots","_u","key","fn","data","dom","handleDelete","id","form","total","paging","modcom","reseteditform","chansgedialogVisible","staticRenderFns","title","handleClose","ref","rules","query","staticStyle","model","value","name","callback","$$v","$set","expression","_l","list","imet","index","checked","handleCheckAllChange","_s","handleCheckedCitiesChange","checkedCities","children","it","slot","satlop","submit","props","type","default","required","message","trigger","validator","created","updated","methods","add","console","row","meure","then","catch","component","page","psize","prop","label","width","isshow","showname","components","Roleadd","Table","Paging","confirmButtonText","cancelButtonText","seratch","done","handleSizeChange","handleCurrentChange","require","directives","rawName","handleSelectionChange","scope","_t","val"],"sourceRoot":""}